/*****************************************************************************
 @Project	: 
 @File 		: Odometry.c
 @Details  	:
 @Author	: 
 @Hardware	: 
 
 --------------------------------------------------------------------------
 @Revision	:
  Ver  	Author    	Date        	Changes
 --------------------------------------------------------------------------
   1.0  Name     XXXX-XX-XX  		Initial Release
   
******************************************************************************/
#include <Common.h>
#include "Hal.h"
#include "Timer.h"
#include "Encoder.h"
#include "Odometry.h"


/*****************************************************************************
 Define
******************************************************************************/


/*****************************************************************************
 Type definition
******************************************************************************/


/*****************************************************************************
 Global Variables
******************************************************************************/


/*****************************************************************************
 Local Variables
******************************************************************************/


/*****************************************************************************
 Local Functions
******************************************************************************/


/*****************************************************************************
 Implementation
******************************************************************************/
void 
OdomInit( 
    PODOM_HANDLE        pHandle,
    PTIMER_HANDLE       pTimerHandle,
    uint32_t            nTimerhz
    )
{
    ASSERT( 0 != pHandle );
    ASSERT( 0 != pTimerHandle );

    pHandle->pTimer     = pTimerHandle;
    pHandle->nTimerHz   = nTimerhz;
    pHandle->nTotal     = 0;
}


int OdomAccumulate( PODOM_HANDLE pHandle, int nCount )
{
    int timestamp;

    ASSERT( 0 != pHandle );

    /* Stamp current time */
    timestamp = TimerReadCount( pHandle->pTimer );
    pHandle->nTotal += nCount;
    pHandle->nRpm = nCount / ( timestamp - pHandle->nPrevTimestamp );
    pHandle->nPrevTimestamp = timestamp;



}

int OdomRPM( PODOM_HANDLE pHandle )
{
    
}


/*****************************************************************************
 Callback functions
******************************************************************************/


/*****************************************************************************
 Local functions
******************************************************************************/


/*****************************************************************************
 Interrupt functions
******************************************************************************/






















